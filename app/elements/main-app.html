<dom-module id="main-app">
	<style>
		custom-hand {
			position: absolute;
			bottom: 0px;
			background-color: grey;
			width: 100%;
			height: 180px;
		}
		paper-input {
			--paper-input-container-color: grey;
			--paper-input-container-input-color: white;
			position: absolute;
			right: 20px;
			width: 20em;
		}
		a {
			text-decoration: none;
		}
		a:visited {
			text-decoration: none;
			color: inherit;
		}

	</style>
	<template>
		<link rel="import" href="router.html" />
		<paper-header-panel>
			<paper-toolbar>
	  			<paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
	  			<h1><a href="#!/">Play Cards Against Humanity</a></h1>
	  			<!-- <paper-input label="Game" type="text" readonly value$="{{getUrl()}}"></paper-input> -->
  			</paper-toolbar>
			<paper-drawer-panel responsiveWidth=600>
  				<app-drawer drawer game$="{{gameId}}"></app-drawer>
				<more-route-selector id="route" main>
					<iron-pages>
						<home-page route="home"></home-page>
						<app-content route="game" game="{{gameId}}"></app-content>
						<card-creator route="card-creator"></card-creator>
						<card-viewer route="card-viewer"></card-viewer>
					</iron-pages>
				</more-route-selector>
			</paper-drawer-panel>
		</paper-header-panel>
		<template is="dom-if" if="{{gameId}}">
			<custom-hand route="game" game$="{{gameId}}" user="user_0"></custom-hand>
		</template>
	</template>
	<script>
		MainApp = Polymer({
			is: 'main-app',
			properties: {
				gameId: {
					type: String,
					notify: true
				}
			},
			attached: function() {
				var _this = this,
					other_routes = [
						'card-creator',
						'card-viewer'
					];
				
				setInterval(function() {
					_this.gameId = _this.$.route.$.selection.selectedParams && !other_routes.indexOf(_this.$.route.$.selection.selectedParams.gameId) ? _this.$.route.$.selection.selectedParams.gameId : null;
				}, 10);
			},
			getUrl: function() {
				return window.location.toString();
			}
		});
	</script>
</dom-module>
